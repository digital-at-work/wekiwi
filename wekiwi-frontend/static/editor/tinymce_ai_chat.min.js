tinymce.PluginManager.add("chatPlugin",(function(e){const t=e.getParam("chatPlugin"),n=function(){const n=t.prompts?t.prompts.map((e=>({text:e,value:`You are a HELPFUL assistant that responds in GERMAN (unless specified differently). You STRICTLY complete the TASK based on the INPUT (CONSIZE). TASK: ${e} INPUT: `}))):[];return n.unshift({text:"Custom Prompt",value:""}),e.windowManager.open({title:"AI Text Helper",body:{type:"panel",items:[{type:"textarea",name:"inputText",label:"Gebe hier deinen Text ein"},{type:"selectbox",name:"prompt",label:"Wähle ein Prompt aus",items:n},{type:"htmlpanel",html:'<p style="font-size: 11px;text-align: center;margin-top:12px;"></p>'}]},buttons:[{type:"cancel",text:"Schließen"},{type:"submit",text:"Generieren",primary:!0}],initialData:{inputText:tinymce.activeEditor.selection.getContent()??""},onSubmit:function(n){n.block("Bitte warte kurz ...");const i=n.getData(),o=i.inputText;let r=i.prompt??"";r+=`${o} ### RESPONSE:`,t.getResponse(r).then((e=>e.json())).then((t=>{const i=t.completions[0].completion;e.insertContent(i),n.close()})).catch((e=>{console.log("The following error occoured in the chat plugin "+e)}))}})};return e.ui.registry.addIcon("chatPlugin",'<svg width="30px" height="30px" viewBox="0 0 76 76" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" baseProfile="full" enable-background="new 0 0 76.00 76.00" xml:space="preserve" fill="#000000">\n        <g id="SVGRepo_bgCarrier" stroke-width="0"></g>\n        <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>\n        <g id="SVGRepo_iconCarrier">\n            <path fill="#000000" fill-opacity="1" stroke-width="0.2" stroke-linejoin="round" \n              d="M 30.4822,22.8009L 37.3426,22.8009L 46.9122,52.2525L 41.1446,52.2525L 38.4785,43.9062L 29.1276,43.9062L 26.5929,52.2525L 21.0439,52.2525L 30.4822,22.8009 Z \n                 M 32.2736,32.5887L 30.0017,39.8432L 37.5616,39.8432L 35.2452,32.5887C 34.6774,30.7977 34.1965,28.7872 33.7601,27.083L 33.6723,27.083C 33.2351,28.7872 32.7982,30.8409 32.2736,32.5887 Z \n                 M 48.7023,25.0292C 48.7023,23.3687 49.9255,22.1014 51.717,22.1014C 53.5521,22.1014 54.6885,23.3687 54.7322,25.0292C 54.7322,26.6462 53.5521,27.9135 51.6733,27.9135C 49.8819,27.9135 48.7023,26.6462 48.7023,25.0292 Z \n                 M 49.0077,52.2525L 49.0077,30.9723L 54.4267,30.9723L 54.4267,52.2525L 49.0077,52.2525 Z ">\n            </path>\n        </g>\n      </svg>'),e.ui.registry.addButton("chatPlugin",{icon:"chatPlugin",tooltip:"AI TextHelper",onAction:function(){n()}}),e.ui.registry.addMenuItem("chatPlugin",{text:"AI TextHelper",onAction:function(){n()}}),{getMetadata:function(){return{name:"AI Chat Plugin"}}}}));